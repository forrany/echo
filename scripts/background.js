var Z={exports:{}};(function(c){var L=function(a){var f=Object.prototype,u=f.hasOwnProperty,h=Object.defineProperty||function(r,t,e){r[t]=e.value},s,b=typeof Symbol=="function"?Symbol:{},E=b.iterator||"@@iterator",K=b.asyncIterator||"@@asyncIterator",j=b.toStringTag||"@@toStringTag";function g(r,t,e){return Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{g({},"")}catch{g=function(t,e,o){return t[e]=o}}function Y(r,t,e,o){var n=t&&t.prototype instanceof P?t:P,i=Object.create(n.prototype),l=new $(o||[]);return h(i,"_invoke",{value:V(r,e,l)}),i}a.wrap=Y;function k(r,t,e){try{return{type:"normal",arg:r.call(t,e)}}catch(o){return{type:"throw",arg:o}}}var B="suspendedStart",Q="suspendedYield",q="executing",G="completed",d={};function P(){}function N(){}function m(){}var I={};g(I,E,function(){return this});var A=Object.getPrototypeOf,_=A&&A(A(C([])));_&&_!==f&&u.call(_,E)&&(I=_);var S=m.prototype=P.prototype=Object.create(I);N.prototype=m,h(S,"constructor",{value:m,configurable:!0}),h(m,"constructor",{value:N,configurable:!0}),N.displayName=g(m,j,"GeneratorFunction");function z(r){["next","throw","return"].forEach(function(t){g(r,t,function(e){return this._invoke(t,e)})})}a.isGeneratorFunction=function(r){var t=typeof r=="function"&&r.constructor;return t?t===N||(t.displayName||t.name)==="GeneratorFunction":!1},a.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,m):(r.__proto__=m,g(r,j,"GeneratorFunction")),r.prototype=Object.create(S),r},a.awrap=function(r){return{__await:r}};function T(r,t){function e(i,l,p,y){var v=k(r[i],r,l);if(v.type==="throw")y(v.arg);else{var M=v.arg,O=M.value;return O&&typeof O=="object"&&u.call(O,"__await")?t.resolve(O.__await).then(function(w){e("next",w,p,y)},function(w){e("throw",w,p,y)}):t.resolve(O).then(function(w){M.value=w,p(M)},function(w){return e("throw",w,p,y)})}}var o;function n(i,l){function p(){return new t(function(y,v){e(i,l,y,v)})}return o=o?o.then(p,p):p()}h(this,"_invoke",{value:n})}z(T.prototype),g(T.prototype,K,function(){return this}),a.AsyncIterator=T,a.async=function(r,t,e,o,n){n===void 0&&(n=Promise);var i=new T(Y(r,t,e,o),n);return a.isGeneratorFunction(t)?i:i.next().then(function(l){return l.done?l.value:i.next()})};function V(r,t,e){var o=B;return function(i,l){if(o===q)throw new Error("Generator is already running");if(o===G){if(i==="throw")throw l;return W()}for(e.method=i,e.arg=l;;){var p=e.delegate;if(p){var y=D(p,e);if(y){if(y===d)continue;return y}}if(e.method==="next")e.sent=e._sent=e.arg;else if(e.method==="throw"){if(o===B)throw o=G,e.arg;e.dispatchException(e.arg)}else e.method==="return"&&e.abrupt("return",e.arg);o=q;var v=k(r,t,e);if(v.type==="normal"){if(o=e.done?G:Q,v.arg===d)continue;return{value:v.arg,done:e.done}}else v.type==="throw"&&(o=G,e.method="throw",e.arg=v.arg)}}}function D(r,t){var e=t.method,o=r.iterator[e];if(o===s)return t.delegate=null,e==="throw"&&r.iterator.return&&(t.method="return",t.arg=s,D(r,t),t.method==="throw")||e!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+e+"' method")),d;var n=k(o,r.iterator,t.arg);if(n.type==="throw")return t.method="throw",t.arg=n.arg,t.delegate=null,d;var i=n.arg;if(!i)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d;if(i.done)t[r.resultName]=i.value,t.next=r.nextLoc,t.method!=="return"&&(t.method="next",t.arg=s);else return i;return t.delegate=null,d}z(S),g(S,j,"Generator"),g(S,E,function(){return this}),g(S,"toString",function(){return"[object Generator]"});function X(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function J(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function $(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(X,this),this.reset(!0)}a.keys=function(r){var t=Object(r),e=[];for(var o in t)e.push(o);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}};function C(r){if(r){var t=r[E];if(t)return t.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var e=-1,o=function n(){for(;++e<r.length;)if(u.call(r,e))return n.value=r[e],n.done=!1,n;return n.value=s,n.done=!0,n};return o.next=o}}return{next:W}}a.values=C;function W(){return{value:s,done:!0}}return $.prototype={constructor:$,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(J),!r)for(var t in this)t.charAt(0)==="t"&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var r=this.tryEntries[0],t=r.completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function e(y,v){return i.type="throw",i.arg=r,t.next=y,v&&(t.method="next",t.arg=s),!!v}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],i=n.completion;if(n.tryLoc==="root")return e("end");if(n.tryLoc<=this.prev){var l=u.call(n,"catchLoc"),p=u.call(n,"finallyLoc");if(l&&p){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else if(p){if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&u.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&(r==="break"||r==="continue")&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=r,i.arg=t,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(i)},complete:function(r,t){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&t&&(this.next=t),d},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===r)return this.complete(e.completion,e.afterLoc),J(e),d}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===r){var o=e.completion;if(o.type==="throw"){var n=o.arg;J(e)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,e){return this.delegate={iterator:C(r),resultName:t,nextLoc:e},this.method==="next"&&(this.arg=s),d}},a}(c.exports);try{regeneratorRuntime=L}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=L:Function("r","regeneratorRuntime = r")(L)}})(Z);const U="https://api.yunzhu.info";function H(c,L){return fetch(`${U}${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L),mode:"cors"})}function F(){return fetch(`${U}/user/currentUser`,{method:"GET",mode:"cors"})}function R(c){return fetch(`${U}/user/loginByPwd`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),mode:"cors"})}chrome.runtime.onMessage.addListener((c,L,a)=>{if(c.type==="user-login"){const{params:f}=c;R({...f}).then(async u=>{const h=await u.text(),s=JSON.parse(h);a(s)}).catch(u=>{a(u)})}if(c.type==="user-logout"&&H("/user/logout",{}).then(async f=>{const u=await f.text(),h=JSON.parse(u);a(h)}).catch(f=>{a(f)}),c.type==="get-user-data"&&F().then(async f=>{try{const u=await f.text(),h=JSON.parse(u);a(h)}catch(u){a(u)}}),c.type==="post-data"){const{url:f,params:u}=c;H(f,{...u}).then(async h=>{const s=await h.text(),b=JSON.parse(s);a(b)}).catch(h=>{a(h)})}if(c.type==="goto-page"){const{url:f}=c;chrome.tabs.create({url:f})}return!0});
